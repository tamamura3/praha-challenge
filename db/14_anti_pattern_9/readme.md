# 課題1

# mailAddressのカラム
- メールアドレスカラムに特定のドメインしか入らないようにしたい
    - a@example.comなど
## DBで制約する場合のメリット
- 制約を付けるコストが低い
## DBで制約する場合のデメリット
- エラー時のレスポンスが遅くなる
    - insertするまでバリデーションが発生しないため
- 制約を変更するコストがかかる
    - 制約を削除して再作成する必要がある
    - アプリでコード修正、試験、ビルド～などを行うのもコストがかかるのでどちらにせよコストはかかる
## Checkを使うべき場合
- アプリ以外からデータをinsertする可能性がある場合
    - triggerや運用上手動で行うなど。その場合はアプリ側で制約が課せないため
## Checkを使うべきでない場合
- アプリ側で制約できる場合

# 退会時のtrigger
## DBで制約する場合のメリット
- 
## DBで制約する場合のデメリット
## Checkを使うべき場合
## Checkを使うべきでない場合


## 方法1: DBで制約(check制約)
### メリット
- 制約を付けるだけで対応できる
### デメリット
- 無効のアドレスの場合の通知が時間かかる
    - insertするまでバリデーションが発生しないため
- 制約の内容を変更するのにコストがかかる
    - 制約を一度削除して再度付与しなければならない

### 方法2: アプリケーションで制約
### メリット
- 無効のアドレスの場合、即座に通知できる
    - フロントでバリデーションして即座にユーザーに結果を伝えることができる
### デメリット
- 制約の内容を変更するのにコストがかかる
    - コード修正、試験、ビルド、デプロイが必要
    - でもDBを変更するのに比べればコストが低いかもしれない

# 退会時のTrigger
- ユーザーの退会時にUserテーブルから削除してWithdrawnUserに挿入する。この一連の処理がセットで実行されるようにしたい
## 方法1: DBで制約（trigger）
### メリット
- 特にない
### デメリット
- 制約の存在に気づきにくい
    - DBまで見ないと処理が分からない。特に新規メンバーはデータがどこで更新されているか気づきにくい。
### 方法2: アプリケーションで制約
- 特にない
### メリット
- 
### デメリット
- 

# genderカラム
## 方法1: DBで制約（enum）
### メリット
- コードの変更が不要
### デメリット
- 制約の内容を変更するのにコストがかかる
    - 制約を一度削除して再度付与しなければならない
### 方法2: アプリケーションで制約
### メリット
### デメリット
- 変更時のコストがかかる

# postCodeカラム
## 方法1: DBで制約（domain）
### メリット
- 変更時のコストが比較的低い
    - アプリの変更不要
### デメリット
- 制約に気づきにくい
### 方法2: アプリケーションで制約
### メリット
- 
### デメリット
- 変更時のコストがかかる

# 課題2



https://www.techmixing.com/2018/11/advantages-disadvantages-of-sql-trigger.html
https://nuko-yokohama.hatenadiary.org/entry/20111210/1323463137